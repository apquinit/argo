package env

import (
	"log"

	"github.com/kelseyhightower/envconfig"
)

// LoadEnv loads and validates environment variables using envconfig
func LoadEnv() (*Env, error) {
	var env Env

	// Load environment variables into the Env struct
	err := envconfig.Process("", &env)
	if err != nil {
		return nil, log.Fatalf("error loading environment variables: %w", err)
	}
	return &env, nil
}

// Env holds the environment variables
type Env struct {
	Port int    `envconfig:"PORT" default:"8080"`
	Mode string `envconfig:"MODE" default:"debug" validate:"oneof=debug release"`
}
